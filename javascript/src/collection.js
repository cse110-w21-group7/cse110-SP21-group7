import{CollectionItem,wrapper}from"./components/CollectionItem.js";const customAdd=document.getElementById("cb");function addCollection(e){if(null===e)return;const o=new CollectionItem;o.entry={name:e},wrapper.transaction((o=>{o.target.result.transaction(["currentLogStore"],"readwrite").objectStore("currentLogStore").openCursor().onsuccess=function(o){const t=o.target.result;if(t){const o=t.value,n=o.properties.collections,c={type:"array",name:e,logs:[],tasks:[],images:[],videos:[]};n.push(c);const r=t.update(o);r.onerror=function(e){},r.onsuccess=function(o){console.log('successfully added "'+e+'"')}}}})),document.querySelector(".collection-area").append(o)}function getLogInfoAsJSON(e){wrapper.transaction((o=>{o.target.result.transaction(["currentLogStore"],"readonly").objectStore("currentLogStore").openCursor().onsuccess=function(o){const t=o.target.result;t&&e(t.value)}}))}function populateCollections(e){const o=e.properties.collections,t=document.querySelector(".collection-area");o.forEach(((e,o)=>{const n=function(e){const o=new CollectionItem;return o.entry={name:e.name},o}(e);t.appendChild(n)}))}function populatePage(e){populateCollections(e)}customAdd.addEventListener("click",(()=>{addCollection(window.prompt("Please enter the name of your new collection:"))})),document.addEventListener("DOMContentLoaded",(e=>{getLogInfoAsJSON(populatePage)}));